


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > AROverlayView</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">uk.trigpointing.android.ar</a>
</div>

<h1>Coverage Summary for Class: AROverlayView (uk.trigpointing.android.ar)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">AROverlayView</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/14)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/52)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/140)
  </span>
</td>
</tr>
  <tr>
    <td class="name">AROverlayView$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">AROverlayView$2</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">AROverlayView$3</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">AROverlayView$TrigpointData</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/7)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/13)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/24)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/52)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/156)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package uk.trigpointing.android.ar;
&nbsp;
&nbsp;import android.content.Context;
&nbsp;import android.content.SharedPreferences;
&nbsp;import android.graphics.Canvas;
&nbsp;import android.graphics.Color;
&nbsp;import android.graphics.Paint;
&nbsp;import android.graphics.Rect;
&nbsp;import android.graphics.drawable.Drawable;
&nbsp;import android.location.Location;
&nbsp;import android.util.AttributeSet;
&nbsp;import android.util.Log;
&nbsp;import android.view.View;
&nbsp;
&nbsp;import androidx.core.content.ContextCompat;
&nbsp;import androidx.preference.PreferenceManager;
&nbsp;
&nbsp;import java.io.IOException;
&nbsp;import java.io.InputStream;
&nbsp;import java.util.ArrayList;
&nbsp;import java.util.List;
&nbsp;
&nbsp;import uk.trigpointing.android.types.Trig;
&nbsp;
&nbsp;/**
&nbsp; * Custom view that draws trigpoint overlays on top of camera for sensor-based AR
&nbsp; */
&nbsp;public class AROverlayView extends View {
&nbsp;    private static final String TAG = &quot;AROverlayView&quot;;
&nbsp;    
&nbsp;    private Paint textPaint;
&nbsp;    private Paint iconPaint;
<b class="nc">&nbsp;    private List&lt;TrigpointData&gt; trigpoints = new ArrayList&lt;&gt;();</b>
<b class="nc">&nbsp;    private float deviceAzimuth = 0;</b>
<b class="nc">&nbsp;    private float devicePitch = 0;</b>
&nbsp;    private Location currentLocation;
&nbsp;    
&nbsp;    // Simple data holder for trigpoint information
&nbsp;    public static class TrigpointData {
&nbsp;        long id;
&nbsp;        String name;
&nbsp;        double lat;
&nbsp;        double lon;
&nbsp;        String type;
&nbsp;        String condition;
&nbsp;        
<b class="nc">&nbsp;        public TrigpointData(long id, String name, double lat, double lon, String type, String condition) {</b>
<b class="nc">&nbsp;            this.id = id;</b>
<b class="nc">&nbsp;            this.name = name;</b>
<b class="nc">&nbsp;            this.lat = lat;</b>
<b class="nc">&nbsp;            this.lon = lon;</b>
<b class="nc">&nbsp;            this.type = type;</b>
<b class="nc">&nbsp;            this.condition = condition;</b>
&nbsp;        }
&nbsp;        
<b class="nc">&nbsp;        public long getId() { return id; }</b>
<b class="nc">&nbsp;        public String getName() { return name; }</b>
<b class="nc">&nbsp;        public double getLat() { return lat; }</b>
<b class="nc">&nbsp;        public double getLon() { return lon; }</b>
<b class="nc">&nbsp;        public String getType() { return type; }</b>
<b class="nc">&nbsp;        public String getCondition() { return condition; }</b>
&nbsp;    }
&nbsp;    
&nbsp;    public AROverlayView(Context context, AttributeSet attrs) {
<b class="nc">&nbsp;        super(context, attrs);</b>
<b class="nc">&nbsp;        initPaints();</b>
&nbsp;    }
&nbsp;    
&nbsp;    private void initPaints() {
<b class="nc">&nbsp;        textPaint = new Paint();</b>
<b class="nc">&nbsp;        textPaint.setColor(Color.WHITE);</b>
<b class="nc">&nbsp;        textPaint.setTextSize(40);</b>
<b class="nc">&nbsp;        textPaint.setAntiAlias(true);</b>
<b class="nc">&nbsp;        textPaint.setShadowLayer(2, 1, 1, Color.BLACK);</b>
&nbsp;        
<b class="nc">&nbsp;        iconPaint = new Paint();</b>
<b class="nc">&nbsp;        iconPaint.setAntiAlias(true);</b>
&nbsp;    }
&nbsp;    
&nbsp;    // Compass directions with their bearings
<b class="nc">&nbsp;    private static final String[] COMPASS_DIRECTIONS = {</b>
&nbsp;        &quot;N&quot;, &quot;NNE&quot;, &quot;NE&quot;, &quot;ENE&quot;, &quot;E&quot;, &quot;ESE&quot;, &quot;SE&quot;, &quot;SSE&quot;, 
&nbsp;        &quot;S&quot;, &quot;SSW&quot;, &quot;SW&quot;, &quot;WSW&quot;, &quot;W&quot;, &quot;WNW&quot;, &quot;NW&quot;, &quot;NNW&quot;
&nbsp;    };
<b class="nc">&nbsp;    private static final float[] COMPASS_BEARINGS = {</b>
&nbsp;        0f, 22.5f, 45f, 67.5f, 90f, 112.5f, 135f, 157.5f,
&nbsp;        180f, 202.5f, 225f, 247.5f, 270f, 292.5f, 315f, 337.5f
&nbsp;    };
&nbsp;    
&nbsp;    public void updateTrigpoints(List&lt;TrigpointData&gt; trigpoints) {
<b class="nc">&nbsp;        this.trigpoints = new ArrayList&lt;&gt;(trigpoints);</b>
<b class="nc">&nbsp;        invalidate(); // Trigger redraw</b>
&nbsp;    }
&nbsp;    
&nbsp;    public void updateOrientation(float azimuth, float pitch, float roll) {
<b class="nc">&nbsp;        this.deviceAzimuth = azimuth;</b>
<b class="nc">&nbsp;        this.devicePitch = pitch;</b>
<b class="nc">&nbsp;        invalidate(); // Trigger redraw</b>
&nbsp;    }
&nbsp;    
&nbsp;    public void setCurrentLocation(Location location) {
<b class="nc">&nbsp;        this.currentLocation = location;</b>
&nbsp;    }
&nbsp;    
&nbsp;    @Override
&nbsp;    protected void onDraw(Canvas canvas) {
<b class="nc">&nbsp;        super.onDraw(canvas);</b>
&nbsp;        
<b class="nc">&nbsp;        int screenWidth = getWidth();</b>
<b class="nc">&nbsp;        int screenHeight = getHeight();</b>
<b class="nc">&nbsp;        float fieldOfView = 60.0f; // Degrees, typical phone camera FOV</b>
&nbsp;        
&nbsp;        // Draw compass directions at top of screen
<b class="nc">&nbsp;        drawCompassDirections(canvas, screenWidth, fieldOfView);</b>
&nbsp;        
<b class="nc">&nbsp;        if (trigpoints.isEmpty() || currentLocation == null) {</b>
&nbsp;            return;
&nbsp;        }
&nbsp;        
&nbsp;        // Sort trigpoints by distance (farthest first) so nearest appear on top
<b class="nc">&nbsp;        List&lt;TrigpointData&gt; sortedTrigpoints = new ArrayList&lt;&gt;(trigpoints);</b>
<b class="nc">&nbsp;        sortedTrigpoints.sort((t1, t2) -&gt; {</b>
<b class="nc">&nbsp;            Location loc1 = new Location(&quot;temp&quot;);</b>
<b class="nc">&nbsp;            loc1.setLatitude(t1.getLat());</b>
<b class="nc">&nbsp;            loc1.setLongitude(t1.getLon());</b>
<b class="nc">&nbsp;            float dist1 = currentLocation.distanceTo(loc1);</b>
&nbsp;            
<b class="nc">&nbsp;            Location loc2 = new Location(&quot;temp&quot;);</b>
<b class="nc">&nbsp;            loc2.setLatitude(t2.getLat());</b>
<b class="nc">&nbsp;            loc2.setLongitude(t2.getLon());</b>
<b class="nc">&nbsp;            float dist2 = currentLocation.distanceTo(loc2);</b>
&nbsp;            
<b class="nc">&nbsp;            return Float.compare(dist2, dist1); // Farthest first (reverse order)</b>
&nbsp;        });
&nbsp;        
<b class="nc">&nbsp;        for (TrigpointData trig : sortedTrigpoints) {</b>
&nbsp;            // Calculate bearing to trigpoint
<b class="nc">&nbsp;            Location trigLocation = new Location(&quot;trigpoint&quot;);</b>
<b class="nc">&nbsp;            trigLocation.setLatitude(trig.getLat());</b>
<b class="nc">&nbsp;            trigLocation.setLongitude(trig.getLon());</b>
&nbsp;            
<b class="nc">&nbsp;            float bearing = currentLocation.bearingTo(trigLocation);</b>
<b class="nc">&nbsp;            if (bearing &lt; 0) bearing += 360; // Normalize to 0-360</b>
&nbsp;            
<b class="nc">&nbsp;            float distance = currentLocation.distanceTo(trigLocation);</b>
&nbsp;            
&nbsp;            // Calculate relative bearing (difference between trigpoint bearing and device bearing)
<b class="nc">&nbsp;            float relativeBearing = bearing - deviceAzimuth;</b>
&nbsp;            
&nbsp;            // Normalize relative bearing to -180 to 180
<b class="nc">&nbsp;            while (relativeBearing &gt; 180) relativeBearing -= 360;</b>
<b class="nc">&nbsp;            while (relativeBearing &lt; -180) relativeBearing += 360;</b>
&nbsp;            
&nbsp;            // Only draw trigpoints within field of view
<b class="nc">&nbsp;            if (Math.abs(relativeBearing) &lt;= fieldOfView / 2) {</b>
&nbsp;                // Calculate screen position
<b class="nc">&nbsp;                float screenX = screenWidth / 2 + (relativeBearing / (fieldOfView / 2)) * (screenWidth / 2);</b>
&nbsp;                
&nbsp;                // For now, put all trigpoints at horizon level (center Y)
&nbsp;                // TODO: Adjust for elevation differences using devicePitch
<b class="nc">&nbsp;                float screenY = screenHeight / 2;</b>
&nbsp;                
&nbsp;                // Draw trigpoint icon
<b class="nc">&nbsp;                drawTrigpointIcon(canvas, trig, screenX, screenY, distance);</b>
&nbsp;            }
&nbsp;        }
&nbsp;    }
&nbsp;    
&nbsp;    private void drawCompassDirections(Canvas canvas, int screenWidth, float fieldOfView) {
<b class="nc">&nbsp;        Paint compassPaint = new Paint();</b>
<b class="nc">&nbsp;        compassPaint.setColor(Color.WHITE);</b>
<b class="nc">&nbsp;        compassPaint.setTextSize(36); // Slightly smaller than trigpoint text</b>
<b class="nc">&nbsp;        compassPaint.setAntiAlias(true);</b>
<b class="nc">&nbsp;        compassPaint.setShadowLayer(2, 1, 1, Color.BLACK);</b>
<b class="nc">&nbsp;        compassPaint.setTypeface(android.graphics.Typeface.MONOSPACE);</b>
&nbsp;        
<b class="nc">&nbsp;        float compassY = 60; // Position near top of screen</b>
&nbsp;        
<b class="nc">&nbsp;        for (int i = 0; i &lt; COMPASS_DIRECTIONS.length; i++) {</b>
<b class="nc">&nbsp;            float bearing = COMPASS_BEARINGS[i];</b>
&nbsp;            
&nbsp;            // Calculate relative bearing (difference between compass bearing and device bearing)
<b class="nc">&nbsp;            float relativeBearing = bearing - deviceAzimuth;</b>
&nbsp;            
&nbsp;            // Normalize relative bearing to -180 to 180
<b class="nc">&nbsp;            while (relativeBearing &gt; 180) relativeBearing -= 360;</b>
<b class="nc">&nbsp;            while (relativeBearing &lt; -180) relativeBearing += 360;</b>
&nbsp;            
&nbsp;            // Only draw compass directions within field of view
<b class="nc">&nbsp;            if (Math.abs(relativeBearing) &lt;= fieldOfView / 2) {</b>
&nbsp;                // Calculate screen position
<b class="nc">&nbsp;                float screenX = screenWidth / 2 + (relativeBearing / (fieldOfView / 2)) * (screenWidth / 2);</b>
&nbsp;                
<b class="nc">&nbsp;                String direction = COMPASS_DIRECTIONS[i];</b>
<b class="nc">&nbsp;                Rect textBounds = new Rect();</b>
<b class="nc">&nbsp;                compassPaint.getTextBounds(direction, 0, direction.length(), textBounds);</b>
&nbsp;                
&nbsp;                // Center the text horizontally
<b class="nc">&nbsp;                float textX = screenX - textBounds.width() / 2;</b>
&nbsp;                
&nbsp;                // Draw text background
<b class="nc">&nbsp;                canvas.drawRect(</b>
<b class="nc">&nbsp;                    textX - 8, compassY - textBounds.height() - 8,</b>
<b class="nc">&nbsp;                    textX + textBounds.width() + 8, compassY + 8,</b>
<b class="nc">&nbsp;                    new Paint() {{ setColor(0x80000000); }} // Semi-transparent black</b>
&nbsp;                );
&nbsp;                
<b class="nc">&nbsp;                canvas.drawText(direction, textX, compassY, compassPaint);</b>
&nbsp;            }
&nbsp;        }
&nbsp;    }
&nbsp;    
&nbsp;        private void drawTrigpointIcon(Canvas canvas, TrigpointData trig, float x, float y, float distance) {
&nbsp;        try {
&nbsp;            // Get trigpoint icon (same source as Leaflet map)
<b class="nc">&nbsp;            Drawable icon = getTrigpointIconDrawable(trig);</b>
&nbsp;
<b class="nc">&nbsp;            if (icon != null) {</b>
&nbsp;                // Scale icon based on distance (closer = larger, but with reasonable limits)
<b class="nc">&nbsp;                float scale = Math.max(0.3f, Math.min(1.0f, 1000.0f / distance));</b>
<b class="nc">&nbsp;                int iconSize = (int) (213 * scale); // Base size 213dp (1/3 of 640dp)</b>
&nbsp;                
&nbsp;                // Draw icon
<b class="nc">&nbsp;                icon.setBounds(</b>
&nbsp;                    (int) (x - iconSize / 2),
&nbsp;                    (int) (y - iconSize / 2),
&nbsp;                    (int) (x + iconSize / 2),
&nbsp;                    (int) (y + iconSize / 2)
&nbsp;                );
<b class="nc">&nbsp;                icon.draw(canvas);</b>
&nbsp;                
&nbsp;                // Draw trigpoint name below icon
<b class="nc">&nbsp;                String text = trig.getName();</b>
<b class="nc">&nbsp;                Rect textBounds = new Rect();</b>
<b class="nc">&nbsp;                textPaint.getTextBounds(text, 0, text.length(), textBounds);</b>
&nbsp;                
<b class="nc">&nbsp;                float textX = x - textBounds.width() / 2;</b>
<b class="nc">&nbsp;                float textY = y + iconSize / 2 + textBounds.height() + 10;</b>
&nbsp;                
&nbsp;                // Draw text background
<b class="nc">&nbsp;                canvas.drawRect(</b>
<b class="nc">&nbsp;                    textX - 5, textY - textBounds.height() - 5,</b>
<b class="nc">&nbsp;                    textX + textBounds.width() + 5, textY + 5,</b>
<b class="nc">&nbsp;                    new Paint() {{ setColor(0x80000000); }} // Semi-transparent black</b>
&nbsp;                );
&nbsp;                
<b class="nc">&nbsp;                canvas.drawText(text, textX, textY, textPaint);</b>
&nbsp;                
&nbsp;                // Draw distance
<b class="nc">&nbsp;                String distanceText = String.format(&quot;%.0fm&quot;, distance);</b>
<b class="nc">&nbsp;                textPaint.getTextBounds(distanceText, 0, distanceText.length(), textBounds);</b>
<b class="nc">&nbsp;                float distanceX = x - textBounds.width() / 2;</b>
<b class="nc">&nbsp;                float distanceY = textY + textBounds.height() + 10;</b>
&nbsp;                
<b class="nc">&nbsp;                canvas.drawRect(</b>
<b class="nc">&nbsp;                    distanceX - 5, distanceY - textBounds.height() - 5,</b>
<b class="nc">&nbsp;                    distanceX + textBounds.width() + 5, distanceY + 5,</b>
<b class="nc">&nbsp;                    new Paint() {{ setColor(0x80000000); }}</b>
&nbsp;                );
&nbsp;                
<b class="nc">&nbsp;                canvas.drawText(distanceText, distanceX, distanceY, textPaint);</b>
&nbsp;            }
&nbsp;        } catch (Exception e) {
<b class="nc">&nbsp;            Log.e(TAG, &quot;Error drawing trigpoint icon for &quot; + trig.getName(), e);</b>
&nbsp;        }
&nbsp;    }
&nbsp;    
&nbsp;        private Drawable getTrigpointIconDrawable(TrigpointData trigpoint) {
&nbsp;        // Get user&#39;s map icon style preference (same as Leaflet maps)
<b class="nc">&nbsp;        SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(getContext());</b>
<b class="nc">&nbsp;        String iconStyle = prefs.getString(&quot;map_icon_style&quot;, &quot;medium&quot;);</b>
&nbsp;        
&nbsp;        // Determine icon path using same logic as Leaflet map
<b class="nc">&nbsp;        String iconPath = getTrigIconPath(trigpoint.getType(), trigpoint.getCondition(), iconStyle);</b>
&nbsp;        
&nbsp;        try {
&nbsp;            // Load icon from assets folder (same source as Leaflet map)
<b class="nc">&nbsp;            InputStream inputStream = getContext().getAssets().open(&quot;leaflet/icons/&quot; + iconPath);</b>
<b class="nc">&nbsp;            Drawable drawable = Drawable.createFromStream(inputStream, null);</b>
&nbsp;            inputStream.close();
<b class="nc">&nbsp;            return drawable;</b>
&nbsp;        } catch (IOException e) {
<b class="nc">&nbsp;            Log.w(TAG, &quot;Failed to load icon from assets: &quot; + iconPath + &quot;, falling back to default&quot;);</b>
&nbsp;            // Fallback to default Android drawable
<b class="nc">&nbsp;            Trig.Physical physicalType = Trig.Physical.fromCode(trigpoint.getType());</b>
<b class="nc">&nbsp;            int iconRes = physicalType.icon(true);</b>
<b class="nc">&nbsp;            return ContextCompat.getDrawable(getContext(), iconRes);</b>
&nbsp;        }
&nbsp;    }
&nbsp;    
&nbsp;    private String getTrigIconPath(String type, String condition, String iconStyle) {
&nbsp;        // Map database type codes to icon type names (same as Leaflet)
&nbsp;        String iconType;
<b class="nc">&nbsp;        switch (type) {</b>
<b class="nc">&nbsp;            case &quot;PI&quot;: iconType = &quot;pillar&quot;; break;</b>
<b class="nc">&nbsp;            case &quot;FB&quot;: iconType = &quot;fbm&quot;; break;</b>
<b class="nc">&nbsp;            case &quot;IN&quot;: iconType = &quot;intersected&quot;; break;</b>
<b class="nc">&nbsp;            default: iconType = &quot;passive&quot;; break;</b>
&nbsp;        }
&nbsp;        
&nbsp;        // Determine if icon should be flagged/highlighted (same logic as Leaflet)
<b class="nc">&nbsp;        boolean flagged = false; // TODO: Add marked status check when available</b>
&nbsp;        
&nbsp;        // Determine color based on condition (same logic as Leaflet)
<b class="nc">&nbsp;        String color = getConditionColor(condition);</b>
&nbsp;        
&nbsp;        // Generate icon path based on style (same logic as Leaflet)
<b class="nc">&nbsp;        if (&quot;symbols&quot;.equals(iconStyle)) {</b>
&nbsp;            // Use symbol icons with full color support
<b class="nc">&nbsp;            String highlight = flagged ? &quot;_h&quot; : &quot;&quot;;</b>
<b class="nc">&nbsp;            return &quot;symbolicon_&quot; + iconType + &quot;_&quot; + color + highlight + &quot;.png&quot;;</b>
<b class="nc">&nbsp;        } else if (&quot;types&quot;.equals(iconStyle)) {</b>
&nbsp;            // Use type icons with full color support  
<b class="nc">&nbsp;            String highlight = flagged ? &quot;_h&quot; : &quot;&quot;;</b>
<b class="nc">&nbsp;            return &quot;typeicon_&quot; + iconType + &quot;_&quot; + color + highlight + &quot;.png&quot;;</b>
&nbsp;        } else {
&nbsp;            // Use colored logo icons (small/medium/large)
<b class="nc">&nbsp;            String highlight = flagged ? &quot;_h&quot; : &quot;&quot;;</b>
<b class="nc">&nbsp;            return &quot;mapicon_&quot; + iconType + &quot;_&quot; + color + highlight + &quot;.png&quot;;</b>
&nbsp;        }
&nbsp;    }
&nbsp;    
&nbsp;    private String getConditionColor(String condition) {
&nbsp;        // Same color logic as Leaflet map
<b class="nc">&nbsp;        switch (condition) {</b>
<b class="nc">&nbsp;            case &quot;G&quot;: return &quot;green&quot;;    // Good</b>
<b class="nc">&nbsp;            case &quot;S&quot;: return &quot;yellow&quot;;   // Slightly damaged</b>
<b class="nc">&nbsp;            case &quot;C&quot;: return &quot;yellow&quot;;   // Converted  </b>
<b class="nc">&nbsp;            case &quot;D&quot;: return &quot;red&quot;;      // Damaged</b>
<b class="nc">&nbsp;            case &quot;R&quot;: return &quot;red&quot;;      // Remains</b>
<b class="nc">&nbsp;            case &quot;T&quot;: return &quot;red&quot;;      // Toppled</b>
<b class="nc">&nbsp;            case &quot;M&quot;: return &quot;red&quot;;      // Moved</b>
<b class="nc">&nbsp;            case &quot;Q&quot;: return &quot;red&quot;;      // Possibly missing</b>
<b class="nc">&nbsp;            case &quot;X&quot;: return &quot;red&quot;;      // Destroyed</b>
<b class="nc">&nbsp;            case &quot;N&quot;: return &quot;red&quot;;      // Couldn&#39;t find</b>
<b class="nc">&nbsp;            case &quot;V&quot;: return &quot;yellow&quot;;   // Visible but unreachable</b>
<b class="nc">&nbsp;            case &quot;P&quot;: return &quot;grey&quot;;     // Inaccessible</b>
<b class="nc">&nbsp;            case &quot;U&quot;: return &quot;grey&quot;;     // Unknown</b>
<b class="nc">&nbsp;            case &quot;-&quot;: return &quot;grey&quot;;     // Not visited</b>
<b class="nc">&nbsp;            case &quot;Z&quot;: return &quot;grey&quot;;     // Not logged</b>
<b class="nc">&nbsp;            default: return &quot;green&quot;;     // Default to green</b>
&nbsp;        }
&nbsp;    }
&nbsp;    
&nbsp;    @Override
&nbsp;    public boolean performClick() {
&nbsp;        // Handle click events on trigpoint icons
&nbsp;        // TODO: Implement hit testing to determine which trigpoint was clicked
<b class="nc">&nbsp;        return super.performClick();</b>
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2025-08-25 13:52</div>
</div>
</body>
</html>
